# 康托展开 #
**康托展开**（Cantor Expansion）是一种数学方法，它用于将一个排列映射为一个唯一的数。通过康托展开，可以计算出一个排列在所有字典序排列中的排名，也可以通过排名反向生成对应的排列。康托展开在排列问题、全排列字典序问题中经常被使用。

### 康托展开的基本思想：
假设我们有一个由不同元素组成的排列，康托展开的目的是确定这个排列在所有可能的排列中的字典序顺序。康托展开基于阶乘来计算排列的排名。

#### 康托展开公式：
对于一个排列 \( P = (P_1, P_2, \dots, P_n) \)，其康托展开的值（即这个排列的排名）为：

\[
R(P) = \sum_{i=1}^{n} \left( \text{第 } P_i \text{ 后面比 } P_i \text{ 小的数的个数} \times (n-i)! \right)
\]

其中：
- \( P_i \) 是排列中的第 \( i \) 个元素。
- \( (n-i)! \) 是阶乘，表示第 \( i \) 位之后剩余元素可以组成的排列数。

### 例子：
假设我们有一个排列 \( P = (3, 1, 2) \)，并想知道它在全排列中的字典序排名。

全排列的字典序顺序如下：
1. \( (1, 2, 3) \)
2. \( (1, 3, 2) \)
3. \( (2, 1, 3) \)
4. \( (2, 3, 1) \)
5. \( (3, 1, 2) \) ← 这是我们要找的排列
6. \( (3, 2, 1) \)

结果是 \( (3, 1, 2) \) 是第 5 个排列。我们可以用康托展开来验证这一结果。

#### 计算步骤：
1. **第 1 位：3**
   - 3 后面比 3 小的数有 2 个（1 和 2）。
   - 排列还剩下 2 个元素，因此乘以 \( 2! = 2 \)。
   - 第 1 项贡献为 \( 2 \times 2! = 4 \)。

2. **第 2 位：1**
   - 1 后面比 1 小的数没有，所以第 2 项为 0。

3. **第 3 位：2**
   - 2 是最后一个数，所以第 3 项也为 0。

最终展开结果为：
\[
R(P) = 4 + 0 + 0 = 4
\]
这个结果是从 0 开始的排名，因此从 1 开始计数，排名为 5。

### 应用：
1. **求排列的字典序排名**：通过康托展开可以快速得到某个排列在所有字典序排列中的顺序。
2. **反向生成排列**：可以通过给定的排名，反向推导出具体的排列。
3. **排列问题**：康托展开可以帮助处理与排列相关的各种问题，如全排列的生成、字典序问题等。

### 总结：
康托展开是一种将排列映射为其字典序位置的展开方法，它通过计算排列中各元素后面比当前元素小的元素个数，并乘以相应的阶乘，最终得到排列的排名。这在计算组合排列问题时非常实用。